<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Urban Quest Pro</title>
    <style>
        :root { --primary: #6366f1; --success: #22c55e; --warning: #f59e0b; --bg: #0f172a; --card-bg: #1e293b; }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: system-ui, sans-serif; background: var(--bg); color: #f8fafc; padding: 15px; }
        .container { max-width: 500px; margin: 0 auto; }
        .card, .item { background: var(--card-bg); border-radius: 16px; padding: 20px; margin-bottom: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.3); }
        input[type="text"] { width: 100%; padding: 12px; background: #334155; border: 1px solid #475569; border-radius: 8px; color: white; margin-bottom: 10px; }
        .timer { font-size: 2.5rem; text-align: center; font-family: monospace; margin: 10px 0; color: #94a3b8; }
        .timer.on { color: var(--success); }
        .btns { display: flex; gap: 10px; }
        .btns button { flex: 1; padding: 12px; border: none; border-radius: 10px; color: white; font-weight: bold; cursor: pointer; }
        .prog-bar { height: 10px; background: #334155; border-radius: 5px; margin-top: 15px; overflow: hidden; }
        .prog-fill { height: 100%; background: var(--primary); width: 0%; transition: width 0.3s; }
        .item { border: 2px solid transparent; transition: 0.3s; }
        .item.done { border-color: var(--success); }
        .item-top { display: flex; align-items: center; justify-content: space-between; }
        .photo-preview { width: 100%; border-radius: 10px; margin-top: 15px; display: none; border: 1px solid #475569; }
        .take-btn { display: block; width: 100%; padding: 12px; background: var(--primary); color: white; text-align: center; border-radius: 10px; margin-top: 15px; cursor: pointer; font-weight: bold; }
        .share-btn { width: 100%; padding: 16px; background: #25D366; color: white; border: none; border-radius: 12px; font-size: 18px; font-weight: bold; cursor: pointer; margin-top: 10px; }
    </style>
</head>
<body>
<div class="container">
    <h1>ğŸ“¸ Urban Quest</h1>
    <div class="card">
        <input type="text" id="uname" placeholder="Explorer Name...">
        <div class="timer" id="timer">00:00:00</div>
        <div class="btns">
            <button style="background:var(--success)" id="startB" onclick="tStart()">â–¶ Start</button>
            <button style="background:var(--warning)" id="stopB" onclick="tStop()" disabled>â¹ Finish</button>
        </div>
        <div class="prog-bar"><div id="pfill" class="prog-fill"></div></div>
        <p id="ptext" style="text-align:center; font-size:0.8rem; margin-top:5px;">Progress: 0/7</p>
    </div>

    <div class="item" id="it1"><div class="item-top"><span>ğŸ–¥ï¸ Digital Kiosk</span><span id="chk1">â­•</span></div><img id="img1" class="photo-preview"><label class="take-btn">ğŸ“· Snap Photo<input type="file" hidden accept="image/*" capture="environment" onchange="processFile(this, 1)"></label></div>
    <div class="item" id="it2"><div class="item-top"><span>ğŸ”Œ Public USB</span><span id="chk2">â­•</span></div><img id="img2" class="photo-preview"><label class="take-btn">ğŸ“· Snap Photo<input type="file" hidden accept="image/*" capture="environment" onchange="processFile(this, 2)"></label></div>
    <div class="item" id="it3"><div class="item-top"><span>ğŸ’³ Contactless Payment</span><span id="chk3">â­•</span></div><img id="img3" class="photo-preview"><label class="take-btn">ğŸ“· Snap Photo<input type="file" hidden accept="image/*" capture="environment" onchange="processFile(this, 3)"></label></div>
    <div class="item" id="it4"><div class="item-top"><span>ğŸ“¢ Outdoor Billboard</span><span id="chk4">â­•</span></div><img id="img4" class="photo-preview"><label class="take-btn">ğŸ“· Snap Photo<input type="file" hidden accept="image/*" capture="environment" onchange="processFile(this, 4)"></label></div>
    <div class="item" id="it5"><div class="item-top"><span>â° Selfie with Clock</span><span id="chk5">â­•</span></div><img id="img5" class="photo-preview"><label class="take-btn">ğŸ“· Snap Photo<input type="file" hidden accept="image/*" capture="user" onchange="processFile(this, 5)"></label></div>
    <div class="item" id="it6"><div class="item-top"><span>ğŸ“¶ Free WiFi</span><span id="chk6">â­•</span></div><img id="img6" class="photo-preview"><label class="take-btn">ğŸ“· Snap Photo<input type="file" hidden accept="image/*" capture="environment" onchange="processFile(this, 6)"></label></div>
    <div class="item" id="it7"><div class="item-top"><span>ğŸ›’ Grocery Barcode</span><span id="chk7">â­•</span></div><img id="img7" class="photo-preview"><label class="take-btn">ğŸ“· Snap Photo<input type="file" hidden accept="image/*" capture="environment" onchange="processFile(this, 7)"></label></div>

    <button class="share-btn" onclick="sendWhatsApp()">ğŸ“¤ Share to WhatsApp</button>
</div>

<script>
    let seconds = 0, timerInterval = null, itemsFound = new Set();

    function tStart() {
        if (timerInterval) return;
        document.getElementById('timer').classList.add('on');
        document.getElementById('startB').disabled = true;
        document.getElementById('stopB').disabled = false;
        timerInterval = setInterval(() => {
            seconds++;
            let h = Math.floor(seconds / 3600).toString().padStart(2, '0');
            let m = Math.floor((seconds % 3600) / 60).toString().padStart(2, '0');
            let s = (seconds % 60).toString().padStart(2, '0');
            document.getElementById('timer').textContent = `${h}:${m}:${s}`;
        }, 1000);
    }

    function tStop() {
        clearInterval(timerInterval);
        timerInterval = null;
        alert("Finish! Time: " + document.getElementById('timer').textContent);
    }

    function processFile(input, id) {
        if (input.files && input.files[0]) {
            const reader = new FileReader();
            reader.onload = function(e) {
                // Display the image
                const imgDisplay = document.getElementById(`img${id}`);
                imgDisplay.src = e.target.result;
                imgDisplay.style.display = 'block';
                
                // Update UI and Tracking
                document.getElementById(`it${id}`).classList.add('done');
                document.getElementById(`chk${id}`).textContent = 'âœ…';
                itemsFound.add(id);
                
                // Update Progress Bar
                const count = itemsFound.size;
                document.getElementById('pfill').style.width = (count / 7 * 100) + '%';
                document.getElementById('ptext').textContent = `Progress: ${count}/7`;
            };
            reader.readAsDataURL(input.files[0]);
        }
    }

    function sendWhatsApp() {
        const name = document.getElementById('uname').value || "Explorer";
        const time = document.getElementById('timer').textContent;
        const msg = `ğŸ¯ *Urban Quest Update!*\nğŸ‘¤ Name: ${name}\nâ± Time: ${time}\nâœ… Found: ${itemsFound.size}/7 items.`;
        window.open(`https://api.whatsapp.com/send?text=${encodeURIComponent(msg)}`, '_blank');
    }
</script>
</body>
</html>