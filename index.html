<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Scavenger Hunt Pro</title>
    <style>
        :root { --primary: #6366f1; --success: #22c55e; --warning: #f59e0b; --bg: #0f172a; --card-bg: #1e293b; }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: system-ui, sans-serif; background: var(--bg); color: #f8fafc; padding: 15px; }
        .container { max-width: 500px; margin: 0 auto; }
        h1 { text-align: center; margin-bottom: 20px; font-weight: 800; }
        .card { background: var(--card-bg); border-radius: 16px; padding: 20px; margin-bottom: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.3); }
        input[type="text"] { width: 100%; padding: 12px; background: #334155; border: 1px solid #475569; border-radius: 8px; color: white; font-size: 16px; margin-bottom: 10px; }
        .timer { font-size: 2.5rem; text-align: center; font-family: monospace; margin: 10px 0; color: #94a3b8; }
        .timer.on { color: var(--success); }
        .btns { display: flex; gap: 10px; }
        .btns button { flex: 1; padding: 12px; border: none; border-radius: 10px; color: white; font-weight: bold; cursor: pointer; }
        .green { background: var(--success); }
        .orange { background: var(--warning); }
        .leaderboard { display: none; margin-top: 10px; border-top: 1px solid #334155; padding-top: 10px; }
        .lb-row { display: flex; justify-content: space-between; padding: 5px 0; font-size: 0.9rem; }
        .item { background: var(--card-bg); border-radius: 16px; margin-bottom: 15px; padding: 15px; border: 2px solid transparent; }
        .item.done { border-color: var(--success); }
        .item-top { display: flex; align-items: center; gap: 12px; }
        .name { flex: 1; font-weight: 600; }
        .photo-box img { width: 100%; border-radius: 10px; margin-top: 15px; display: none; }
        .take-btn { display: block; width: 100%; padding: 12px; background: var(--primary); color: white; text-align: center; border-radius: 10px; margin-top: 15px; cursor: pointer; font-weight: bold; }
        .share-btn { width: 100%; padding: 16px; background: #25D366; color: white; border: none; border-radius: 12px; font-size: 18px; font-weight: bold; cursor: pointer; margin-top: 10px; }
    </style>
</head>
<body>
<div class="container">
    <h1>ğŸ“¸ Urban Quest</h1>
    <div class="card">
        <input type="text" id="uname" placeholder="Enter Your Name...">
        <div class="timer" id="timer">00:00:00</div>
        <div class="btns">
            <button class="green" id="startB" onclick="tStart()">â–¶ Start</button>
            <button class="orange" id="stopB" onclick="tStop()" disabled>â¹ Finish</button>
        </div>
        <div id="lbCard" class="leaderboard">
            <h4 style="color:var(--warning)">ğŸ† Top 5 Leaderboard</h4>
            <div id="lbContent"></div>
        </div>
    </div>

    <div class="item" id="it1"><div class="item-top"><span>ğŸ–¥ï¸</span><span class="name">Digital Kiosk</span></div><img id="pimg1"><label class="take-btn">ğŸ“· Snap<input type="file" hidden accept="image/*" capture="environment" onchange="handleF(this,1)"></label></div>
    <div class="item" id="it2"><div class="item-top"><span>ğŸ”Œ</span><span class="name">Public USB</span></div><img id="pimg2"><label class="take-btn">ğŸ“· Snap<input type="file" hidden accept="image/*" capture="environment" onchange="handleF(this,2)"></label></div>
    <div class="item" id="it3"><div class="item-top"><span>ğŸ’³</span><span class="name">Contactless Payment</span></div><img id="pimg3"><label class="take-btn">ğŸ“· Snap<input type="file" hidden accept="image/*" capture="environment" onchange="handleF(this,3)"></label></div>
    <div class="item" id="it4"><div class="item-top"><span>ğŸ“¢</span><span class="name">Outdoor Billboard</span></div><img id="pimg4"><label class="take-btn">ğŸ“· Snap<input type="file" hidden accept="image/*" capture="environment" onchange="handleF(this,4)"></label></div>
    <div class="item" id="it5"><div class="item-top"><span>â°</span><span class="name">Selfie with a Clock</span></div><img id="pimg5"><label class="take-btn">ğŸ“· Snap<input type="file" hidden accept="image/*" capture="user" onchange="handleF(this,5)"></label></div>
    <div class="item" id="it6"><div class="item-top"><span>ğŸ“¶</span><span class="name">Free WiFi</span></div><img id="pimg6"><label class="take-btn">ğŸ“· Snap<input type="file" hidden accept="image/*" capture="environment" onchange="handleF(this,6)"></label></div>
    <div class="item" id="it7"><div class="item-top"><span>ğŸ›’</span><span class="name">Grocery Barcode</span></div><img id="pimg7"><label class="take-btn">ğŸ“· Snap<input type="file" hidden accept="image/*" capture="environment" onchange="handleF(this,7)"></label></div>

    <button class="share-btn" onclick="shareWA()">ğŸ“¤ Share Results to WhatsApp</button>
</div>

<script>
    let seconds = 0, timerInterval = null, completed = {};
    window.onload = showLB;

    function tStart() {
        if (timerInterval) return;
        document.getElementById('timer').classList.add('on');
        document.getElementById('startB').disabled = true;
        document.getElementById('stopB').disabled = false;
        timerInterval = setInterval(() => {
            seconds++;
            document.getElementById('timer').textContent = new Date(seconds * 1000).toISOString().substr(11, 8);
        }, 1000);
    }

    function tStop() {
        clearInterval(timerInterval);
        timerInterval = null;
        const name = document.getElementById('uname').value || "Anonymous";
        let scores = JSON.parse(localStorage.getItem('huntScores') || '[]');
        scores.push({ name, time: seconds });
        scores.sort((a, b) => a.time - b.time);
        localStorage.setItem('huntScores', JSON.stringify(scores.slice(0, 5)));
        showLB();
    }

    function showLB() {
        const scores = JSON.parse(localStorage.getItem('huntScores') || '[]');
        if (scores.length > 0) {
            document.getElementById('lbCard').style.display = 'block';
            document.getElementById('lbContent').innerHTML = scores.map((s, i) => 
                `<div class="lb-row"><span>${i+1}. ${s.name}</span><span>${Math.floor(s.time/60)}m ${s.time%60}s</span></div>`
            ).join('');
        }
    }

    function handleF(input, id) {
        if (input.files[0]) {
            const img = document.getElementById(`pimg${id}`);
            img.src = URL.createObjectURL(input.files[0]);
            img.style.display = 'block';
            document.getElementById(`it${id}`).classList.add('done');
            completed[id] = true;
        }
    }

    function shareWA() {
        const name = document.getElementById('uname').value || "Explorer";
        const time = document.getElementById('timer').textContent;
        const count = Object.keys(completed).length;
        const text = `ğŸ¯ *Urban Quest Complete!*\nğŸ‘¤ Name: ${name}\nâ± Time: ${time}\nâœ… Found: ${count}/7 items`;
        window.open(`https://api.whatsapp.com/send?text=${encodeURIComponent(text)}`, '_blank');
    }
</script>
</body>
</html>